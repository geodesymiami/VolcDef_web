<VirtualHost *:80>
    # Alias directives must come BEFORE WSGIScriptAlias to prevent Flask from catching these URLs
    # Serve /data/HDF5EOS/ and /data/circle_ci as static files (bypass WSGI/Flask)

    # --- Static bypass (must be BEFORE WSGIScriptAlias) ---
    Alias /data/HDF5EOS/      /data/HDF5EOS/
    Alias /data/circleci/     /data/circleci/
    Alias /data/log/          /data/log/

    <DirectoryMatch "^/data/(HDF5EOS|circleci|log)/">
        Options Indexes FollowSymLinks
        Require all granted
    </DirectoryMatch>


    # Flask/WSGI configuration (volcano list: sibling webconfig/volcanoes.json, then WEBCONFIG_DIR/volcanoes.json)
    SetEnv WEBCONFIG_DIR /var/www/webconfig
    WSGIDaemonProcess volcdef_web python-home=/var/www/VolcDef_web/web_env python-path=/var/www/VolcDef_web
    WSGIProcessGroup volcdef_web
    WSGIScriptAlias / /var/www/VolcDef_web/web.wsgi

    <Directory /var/www/VolcDef_web/>
        Require all granted
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/volcdef_web_error.log
    CustomLog ${APACHE_LOG_DIR}/volcdef_web_access.log combined
</VirtualHost>
